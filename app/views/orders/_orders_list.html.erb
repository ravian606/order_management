
<table class="table table-bordered">
  <thead>
    <tr>
      <th>Order Number</th>
      <th>Site</th>
      <th colspan="4"></th>
    </tr>
  </thead>

  <tbody>
    <% @orders.each_with_index do |order, index| %>
        <tr>
          <td><%= index+1 %></td>
          <td><%= order.site.name %></td>
          <td><%= link_to "Products (#{order.products.count})", order %></td>
          <td><%= link_to 'Edit', edit_order_path(order) %></td>
          <td><%= link_to 'Destroy', order, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          <% if params[:action] == 'index' && order.state == 'Started'  %>
            <td><%= link_to 'Mark Complete', mark_complete_order_path(order), method: :patch %></td>
          <% end %>
        </tr>
    <% end %>
  </tbody>
</table>

